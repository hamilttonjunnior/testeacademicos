<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acad√™micos - Gest√£o de Jogos</title>
    <style>
        :root {
            --primary: #1a2a3a;
            --accent: #3498db;
            --error: #e74c3c;
            --success: #27ae60;
            --bg: #f4f7f9;
        }

        body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; }
        
        #loginScreen { position: fixed; inset: 0; background: var(--primary); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .login-box { background: white; padding: 40px; border-radius: 12px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.3); width: 300px; }
        .login-box h2 { margin-top: 0; color: var(--primary); }
        .login-box input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        .login-box button { width: 100%; padding: 12px; background: var(--accent); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }

        .main-content { width: 95%; max-width: 1200px; margin: 20px auto; display: none; }
        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }

        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; background: #fafafa; padding: 20px; border-radius: 8px; border: 1px solid #eaeaea; }
        .field { display: flex; flex-direction: column; gap: 5px; }
        .field label { font-size: 12px; font-weight: bold; color: #666; }

        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 6px; }
        
        .btn-marcar { grid-column: 1 / -1; padding: 15px; background: var(--success); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-marcar:hover { filter: brightness(0.9); }

        .table-wrapper { margin-top: 30px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 800px; }
        th { background: #f8f9fa; color: #333; padding: 15px; text-align: left; border-bottom: 2px solid #dee2e6; }
        td { padding: 15px; border-bottom: 1px solid #eee; vertical-align: middle; }
        
        .row-conflito { background-color: #fff5f5 !important; }
        .border-indicador { width: 6px; padding: 0 !important; }

        .badge { padding: 5px 10px; border-radius: 4px; font-size: 11px; font-weight: 800; }
        .badge-casa { background: #d1ecf1; color: #0c5460; }
        .badge-fora { background: #e2e3e5; color: #383d41; }
        .badge-pendente { background: #fff3cd; color: #856404; }
        
        .error-tag { color: var(--error); font-size: 11px; display: block; margin-top: 4px; font-weight: bold; }
        
        .btn-action { background: none; border: 1px solid #ddd; padding: 5px 8px; border-radius: 4px; cursor: pointer; margin-right: 5px; transition: 0.2s; }
        .btn-action:hover { background: #eee; }
        .btn-del:hover { background: #fdeaea; border-color: var(--error); }
    </style>
</head>
<body>

<div id="loginScreen">
    <div class="login-box">
        <h2>Acad√™micos üèê</h2>
        <p>Acesse o sistema</p>
        <input type="text" id="userIn" placeholder="Usu√°rio">
        <input type="password" id="passIn" placeholder="Senha">
        <button onclick="checkLogin()">Entrar</button>
        <p id="loginErr" style="color:red; font-size:12px; display:none; margin-top:10px;">Dados incorretos!</p>
    </div>
</div>

<div class="main-content" id="app">
    <div class="container">
        <header>
            <h2 style="margin:0;">üìÖ Gest√£o de Jogos Acad√™micos</h2>
            <button onclick="location.reload()" style="background:none; border:1px solid #ccc; padding:5px 10px; border-radius:4px; cursor:pointer;">Sair</button>
        </header>

        <div class="form-grid">
            <div class="field">
                <label>Treinador</label>
                <input type="text" id="treinador" placeholder="Nome">
            </div>
            <div class="field">
                <label>Cor Identificadora</label>
                <input type="color" id="cor" value="#3498db" style="height: 40px; width: 100%;">
            </div>
            <div class="field">
                <label>Localiza√ß√£o</label>
                <select id="casaFora">
                    <option value="Casa">Em Casa üè†</option>
                    <option value="Fora">Fora üöå</option>
                </select>
            </div>
            <div class="field">
                <label>Data</label>
                <input type="date" id="data">
            </div>
            <div class="field">
                <label>Hora</label>
                <input type="time" id="hora">
            </div>
            <div class="field">
                <label>Escal√£o</label>
                <input type="text" id="escalao" placeholder="Ex: Iniciadas">
            </div>
            <div class="field">
                <label>Advers√°rio</label>
                <input type="text" id="adversario" placeholder="Ex: VC Viana">
            </div>
            <div class="field">
                <label>Pavilh√£o / Local</label>
                <input type="text" id="pavilhao" placeholder="Ex: Pav. Mun. Santa Maria">
            </div>
            <button class="btn-marcar" onclick="salvarJogo()">AGENDAR / ATUALIZAR JOGO</button>
        </div>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th class="border-indicador"></th>
                        <th>Treinador</th>
                        <th>Escal√£o</th>
                        <th>Advers√°rio</th>
                        <th>Data/Hora</th>
                        <th>Pavilh√£o</th>
                        <th>Tipo</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="lista"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    let jogos = [];
    let editId = null;

    function checkLogin() {
        const u = document.getElementById('userIn').value;
        const p = document.getElementById('passIn').value;
        if(u === 'academicos' && p === 'academicos2026') {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('app').style.display = 'block';
        } else {
            document.getElementById('loginErr').style.display = 'block';
        }
    }

    function salvarJogo() {
        const novo = {
            id: editId || Date.now(),
            treinador: document.getElementById('treinador').value,
            cor: document.getElementById('cor').value,
            casaFora: document.getElementById('casaFora').value,
            data: document.getElementById('data').value,
            hora: document.getElementById('hora').value,
            escalao: document.getElementById('escalao').value,
            adversario: document.getElementById('adversario').value,
            pavilhao: document.getElementById('pavilhao').value,
            conflito: false
        };

        if(editId) {
            jogos = jogos.map(j => j.id === editId ? novo : j);
            editId = null;
        } else {
            jogos.push(novo);
        }

        validarEOrdenar();
        limpar();
        render();
    }

    function validarEOrdenar() {
        jogos.forEach(j => j.conflito = false);
        for (let i = 0; i < jogos.length; i++) {
            for (let j = i + 1; j < jogos.length; j++) {
                let a = jogos[i];
                let b = jogos[j];
                
                // S√ì VALIDA CONFLITO SE AMBOS FOREM "CASA"
                if(a.casaFora === 'Casa' && b.casaFora === 'Casa' && a.data && b.data && a.hora && b.hora && a.data === b.data) {
                    let diff = Math.abs(new Date(a.data+'T'+a.hora) - new Date(b.data+'T'+b.hora)) / 60000;
                    if(diff < 120) { a.conflito = true; b.conflito = true; }
                }
            }
        }
        jogos.sort((a,b) => (a.data + a.hora).localeCompare(b.data + b.hora));
    }

    function render() {
        const lista = document.getElementById('lista');
        lista.innerHTML = '';

        jogos.forEach(j => {
            const tr = document.createElement('tr');
            if(j.conflito) tr.className = 'row-conflito';

            const dt = j.data ? j.data.split('-').reverse().join('/') : 'Pendente';
            const hr = j.hora || '--:--';
            const badgeClass = !j.data || !j.hora ? 'badge-pendente' : (j.casaFora === 'Casa' ? 'badge-casa' : 'badge-fora');

            tr.innerHTML = `
                <td class="border-indicador" style="background:${j.cor}"></td>
                <td style="font-weight:bold; color:${j.cor}">${j.treinador}</td>
                <td>${j.escalao}</td>
                <td>${j.adversario}</td>
                <td>
                    ${dt} √†s ${hr}
                    ${j.conflito ? '<span class="error-tag">‚ö†Ô∏è Conflito Casa (2h)</span>' : ''}
                </td>
                <td>${j.pavilhao || '---'}</td>
                <td><span class="badge ${badgeClass}">${j.casaFora}</span></td>
                <td>
                    <button class="btn-action" onclick="prepararEdicao(${j.id})">‚úèÔ∏è</button>
                    <button class="btn-action btn-del" onclick="eliminarJogo(${j.id})">üóëÔ∏è</button>
                </td>
            `;
            lista.appendChild(tr);
        });
    }

    function eliminarJogo(id) {
        const confirmacao = prompt("Para eliminar este jogo, digite a senha:");
        if (confirmacao === "academicos2026") {
            jogos = jogos.filter(j => j.id !== id);
            validarEOrdenar();
            render();
        } else if (confirmacao !== null) {
            alert("Senha incorreta!");
        }
    }

    function prepararEdicao(id) {
        const j = jogos.find(x => x.id === id);
        document.getElementById('treinador').value = j.treinador;
        document.getElementById('cor').value = j.cor;
        document.getElementById('casaFora').value = j.casaFora;
        document.getElementById('data').value = j.data;
        document.getElementById('hora').value = j.hora;
        document.getElementById('escalao').value = j.escalao;
        document.getElementById('adversario').value = j.adversario;
        document.getElementById('pavilhao').value = j.pavilhao;
        editId = id;
        window.scrollTo(0,0);
    }

    function limpar() {
        document.getElementById('data').value = '';
        document.getElementById('hora').value = '';
        document.getElementById('escalao').value = '';
        document.getElementById('adversario').value = '';
        document.getElementById('pavilhao').value = '';
    }
</script>
</body>
</html>